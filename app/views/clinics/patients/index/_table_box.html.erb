<div id="table-box">
<%= render partial: "clinics/common/clinic_table" , locals: {
  id: "patients",
  resources: @patients,
  cols: [
    {t: "病患姓名", v: proc{|a| "#{a.name} #{a.id}" }},
    {t: "性別", v: proc{|a| a.gender }},
    {t: "身分證號碼", v: proc{|a| a.person_id }},
    {t: "出生年月日", v: proc{|a| a.birthday }},
    {t: "聯絡電話", v: proc{|a| a.phone }},
    {t: "看診醫生", v: proc{|a|
      if a.default_doctor
        a.default_doctor.name
      else

      end
    }},
    {t: "已可洗牙", v: proc{|a| 
      if a.available_for_tooth_cleaning 
        icon_tag(:circle, class: 'colorBu')
      else
        ""
      end
    }},
    {t: "下次就診日期", v: proc{|a| a.current_event.date }},
    {t: "加入推播狀態", v: proc{|a| 
      if a.line_account.present?
        if a.clinic_patient_notification.present?
          link_to "+", "", remote: true
        else
          "無"
        end
      else
        "未加入linebot"
      end
     }},
  ],
  row: {
    link: proc do |a|
      url_for(action: :show, id: a)
    end
  }
}
%>
</div>